# =========================================================
#  🕰️ Chrony Configuration – Public, Secure, and Resilient
#  🔧 Hardened with Branded NTP Pool: casjay.pool.ntp.org
#  💻 Compatible with Servers, VMs, and Containers
# =========================================================

# =========================================================
# 🌐 Upstream Time Sources (Branded via NTP Pool)
# =========================================================
server         0.casjay.pool.ntp.org    iburst
server         1.casjay.pool.ntp.org    iburst
server         2.casjay.pool.ntp.org    iburst
server         3.casjay.pool.ntp.org    iburst

# =========================================================
# 💾 Drift, State, and Key Files
# =========================================================
driftfile      /var/lib/chrony/drift
ntsdumpdir     /var/lib/chrony
keyfile        /etc/chrony.keys

# =========================================================
# 📊 Logging and Statistics
# =========================================================
logdir         /var/log/chrony
log            measurements statistics tracking

# =========================================================
# ⏱️ Clock Behavior and Adjustment Rules
# =========================================================
rtcsync
makestep       10 3
logchange      0.5

# =========================================================
# 🪄 Smoothed Corrections for Clients (Optional)
# =========================================================
smoothtime     400 0.01

# =========================================================
# 🛡️ Command Access Control (localhost only)
# =========================================================
bindcmdaddress 127.0.0.1
bindcmdaddress ::1
generatecommandkey
cmdallow       127.0.0.1
cmdallow       ::1

# =========================================================
# 🌍 Public NTP Access (Time Sync Only)
# =========================================================
allow          0.0.0.0/0
allow          ::/0

# =========================================================
# 🚦 Rate Limiting to Prevent Abuse
# =========================================================
ratelimit      interval 3 burst 5

# =========================================================
# ✅ End of Configuration
# =========================================================
